<!DOCTYPE html>
<html>
<head>
  <script src="../dist/grider-var.js"></script>
  <script src="https://hongru.github.io/proj/canvas2image/canvas2image.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <div class="app"></div>

  <script>
  const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0)
  const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0)

  const grider = new Grider.Main()
  const { Game, Emitter } = grider.AppInitializer({
    canvasElement: '.app',
    canvasWidth: vw,
    canvasHeight: vh,
    gridSize: 20,
    bgColor: '0xFFFFFF',
    strokeColor: '0xd6d6d6',
  })

  var drawer = grider.Drawer()

  // This is not working, for some reason.
  // exportToBase64().then((dataimage64) => {
  //   console.log(dataimage64)
  // })

  Emitter.on('scene/ready', () => {
    let drawer = grider.Drawer()
    let myBlock = drawer.drawAt({
      position: [0, 0],
      bgColor: '0xff0000',
      strokeColor: '0xff0000',
    })

    let canvasObj = document.getElementsByTagName('canvas')[0]
    let image = Canvas2Image.convertToPNG(canvasObj, vw, vh)
  })
  </script>

</body>
</html>
